@startuml
class AnchorScript {
    + index : int
    + Construct(addAnchorUseCase:AddAnchorUseCase, removeAnchorUseCase:RemoveAnchorUseCase) : void
    + setAnchorCreatedState() : void
    + setAnchorNotCreatedState() : void
    + <<async>> addAnchor() : void
    + removeAnchor() : void
    + deleteObject() : void
    + enableBoundsControl() : void
    + disableBoundsControl() : void
}
class Factory {
}
class "PlaceholderFactory`2"<T1,T2> {
}
MonoBehaviour <|-- AnchorScript
AnchorScript --> "addAnchorButton" GameObject
AnchorScript --> "removeAnchorButton" GameObject
AnchorScript --> "tapToPlaceButton" GameObject
AnchorScript --> "deleteButton" GameObject
AnchorScript +-- Factory
"PlaceholderFactory`2" "<UnityEngine.Object,AnchorScript>" <|-- Factory
interface AnchorCreator {
    + createNativeAnchor(gameObject:GameObject) : void
    + createCloudAnchor(gameObject:GameObject, propIndex:int) : Task<Result>
}
class Result {
}
class Success {
    + anchorIdentifier : string <<get>>
    + Success(anchorIdentifier:string)
}
class Failure {
    + exception : Exception? <<get>>
    + Failure(exception:Exception?)
}
AnchorCreator +-- Result
Result +-- Success
Result <|-- Success
Result +-- Failure
Result <|-- Failure
class AddAnchorUseCase {
    + AddAnchorUseCase(anchorsRepository:AnchorsRepository, saveAnchor:AnchorCreator, sceneAwarnessValidator:AwarnessValidator, gameObjectEditor:GameObjectEditor)
    + <<async>> createAzureAnchor(theObject:GameObject, index:int) : Task<bool>
}
AddAnchorUseCase --> "_anchorsRepository" AnchorsRepository
AddAnchorUseCase --> "_saveAnchor" AnchorCreator
AddAnchorUseCase --> "_sceneAwarnessValidator" AwarnessValidator
AddAnchorUseCase --> "_gameObjectEditor" GameObjectEditor
class AzureAnchorsReporitory {
    + addAnchor(anchorGameObject:AnchorGameObject) : void
    + removeAnchor(id:String) : void
    + getAnchor(id:String) : AnchorGameObject?
    + getAnchorsIds() : List<string>
}
AnchorsRepository <|-- AzureAnchorsReporitory
interface AwarnessValidator {
    + validateSceneReadiness() : Task
}
class SceneAwarnessValidator {
    + Construct(cloudManager:SpatialAnchorManager) : void
    + <<async>> validateSceneReadiness() : Task
    Update() : void
}
MonoBehaviour <|-- SceneAwarnessValidator
AwarnessValidator <|-- SceneAwarnessValidator
interface ObjectCreator {
    + {abstract} enableBoundsControl() : void
    + {abstract} disableBoundsControl() : void
    + {abstract} createNewMachine(obj:GameObject) : void
    + {abstract} createNewMachineWithGO(obj:GameObject) : GameObject
}
class ObjectsCreatorImpl {
    + Construct(anchorObjectFactory:AnchorScript.Factory) : void
    + enableBoundsControl() : void
    + disableBoundsControl() : void
    + createNewMachine(obj:GameObject) : void
    + createNewMachineWithGO(obj:GameObject) : GameObject
}
MonoBehaviour <|-- ObjectsCreatorImpl
ObjectCreator <|-- ObjectsCreatorImpl
class AppInstaller {
    + <<override>> InstallBindings() : void
}
MonoInstaller <|-- AppInstaller
AppInstaller --> "sessionCoordinator" AzureSessionCoordinator
AppInstaller --> "addAnchorUseCase" AddAnchorUseCase
AppInstaller --> "cloudManager" SpatialAnchorManager
AppInstaller --> "objectsCreator" ObjectsCreatorImpl
AppInstaller --> "sceneAwarnessValidator" SceneAwarnessValidator
class RemoveAnchorUseCase {
    + RemoveAnchorUseCase(anchorsRepository:AnchorsRepository, anchorRemover:AnchorRemover, gameObjectEditor:GameObjectEditor)
    + <<async>> removeAzureAnchor(theObject:GameObject) : Task
}
class DebugWindow {
}
MonoBehaviour <|-- DebugWindow
interface AnchorLocator {
    +  <<event>> CloudAnchorLocated : CloudAnchorLocated 
    + startLocatingAzureAnchors(idsToFind:string[]) : void
}
class AzureAnchorLocator {
    {static} ANCHOR_TYPE_PROP : string = "ANCHOR_TYPE"
    + AzureAnchorLocator(cloudManager:SpatialAnchorManager)
    +  <<event>> CloudAnchorLocated : CloudAnchorLocated 
    + startLocatingAzureAnchors(idsToFind:string[]) : void
}
class CloudAnchorLocatedArgs {
    + type : int <<get>>
    + identifier : string <<get>>
    + CloudAnchorLocatedArgs(pose:Pose, type:int, identifier:string)
}
AnchorLocator <|-- AzureAnchorLocator
AzureAnchorLocator --> "_cloudManager" SpatialAnchorManager
AnchorLocator +-- CloudAnchorLocatedArgs
EventArgs <|-- CloudAnchorLocatedArgs
CloudAnchorLocatedArgs --> "pose" Pose
interface StartAzureSession {
    invoke() : Task
}
interface AnchorRemover {
    + deleteNativeAnchor(anchorGameObject:GameObject) : void
    + deleteCloudAnchor(anchorGameObject:GameObject) : Task
}
class AzureCloudManager {
    {static} ANCHOR_TYPE_PROP : string = "ANCHOR_TYPE"
    + AzureCloudManager(cloudManager:SpatialAnchorManager)
    + <<async>> createCloudAnchor(gameObject:GameObject, propIndex:int) : Task<AnchorCreator.Result>
    + createNativeAnchor(gameObject:GameObject) : void
    + <<async>> invoke() : Task
    + deleteNativeAnchor(anchorGameObject:GameObject) : void
    + <<async>> deleteCloudAnchor(anchorGameObject:GameObject) : Task
}
AnchorCreator <|-- AzureCloudManager
StartAzureSession <|-- AzureCloudManager
AnchorRemover <|-- AzureCloudManager
AzureCloudManager --> "_cloudManager" SpatialAnchorManager
interface GameObjectEditor {
    setName(gameObject:GameObject, name:string) : void
    getName(gameObject:GameObject) : string
    setPose(gameObject:GameObject, pose:Pose) : void
}
class GameObjectEditorImpl {
    + getName(gameObject:GameObject) : string
    + setName(gameObject:GameObject, name:string) : void
    + setPose(gameObject:GameObject, pose:Pose) : void
}
GameObjectEditor <|-- GameObjectEditorImpl
interface AnchorsRepository {
    + addAnchor(anchor:AnchorGameObject) : void
    + removeAnchor(id:string) : void
    + getAnchor(id:string) : AnchorGameObject?
    + getAnchorsIds() : List<string>
}
class AnchorGameObject <<struct>> {
    + identifier : string
}
AnchorsRepository +-- AnchorGameObject
AnchorGameObject --> "gameObject" GameObject
class AzureSessionCoordinator {
    + isStarted : bool = false
    + Construct(anchorsRepository:AnchorsRepository, anchorLocator:AnchorLocator, objectsCreator:ObjectCreator, startAzureSession:StartAzureSession, saveAnchor:AnchorCreator, gameObjectEditor:GameObjectEditor) : void
    + Start() : void
}
MonoBehaviour <|-- AzureSessionCoordinator
class AnchorObjectFactory {
    + AnchorObjectFactory(container:DiContainer)
    + Create(prefab:Object) : AnchorScript
}
class "IFactory`2"<T1,T2> {
}
"IFactory`2" "<UnityEngine.Object,AnchorScript>" <|-- AnchorObjectFactory
AnchorObjectFactory --> "_container" DiContainer
@enduml
